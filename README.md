### Техническое задание (ТЗ) для проекта **TravelCraft**

#### **Общее описание**

TravelCraft — это сервис для путешественников, который позволяет:

- Создавать и публиковать маршруты.
- Указывать места, посещенные в маршрутах, с рецензиями.
- Взаимодействовать с другими пользователями: оценивать маршруты и оставлять комментарии.
- Искать маршруты и места, а также просматривать информацию на карте.

Проект включает два компонента:

1. **Backend**: API, отвечающее за бизнес-логику, хранение данных и взаимодействие с базой данных.
2. **Frontend**: пользовательский интерфейс для взаимодействия с сервисом.

---

### **I. Backend**

#### **1. Общие требования**

- Использовать **FastAPI** как основной фреймворк.
- Данные хранятся в **PostgreSQL**, доступ осуществляется через **SQLAlchemy** и **Alembic** для миграций.
- Аутентификация реализована через **fastapi-users** с поддержкой OAuth (Google) и токенов доступа.
- API полностью документировано с использованием встроенной документации OpenAPI.

---

#### **2. Основной функционал API**

##### **1. Пользователи (Users)**

- **Регистрация/вход через e-mail и пароль, OAuth (Google).**
  
- **Модель пользователя включает:**
  
  - ID
  - Имя (name)
  - Email
  - Дата регистрации (created_at)
- **Функционал:**
  
  - Регистрация, авторизация.
  - Просмотр собственного профиля.
  - Обновление данных профиля.
  - Удаление аккаунта.
  - Список маршрутов, созданных пользователем.

---

##### **2. Места (Places)**

- **Модель места включает:**
  
  - ID
  - Название (name)
  - Координаты (latitude, longitude)
  - Описание (description)
  - Теги (связь с моделью `Tag`)
- **Функционал:**
  
  - Получение списка мест.
  - Получение информации о конкретном месте.
  - Добавление нового места (только для авторизованных пользователей).
  - Обновление информации о месте.
  - Удаление места.

---

##### **3. Маршруты (Routes)**

- **Модель маршрута включает:**
  
  - ID
  - Название маршрута (name)
  - Описание (description)
  - Автор (author, связь с моделью `User`)
  - Места в маршруте (связь с `Place`, порядок важен)
  - Оценка маршрута (average_rating)
- **Функционал:**
  
  - Создание маршрута: авторизованный пользователь указывает название, описание и список мест.
  - Получение списка маршрутов: с фильтрацией по тегам, рейтингу, популярности.
  - Получение информации о конкретном маршруте (включая места).
  - Обновление маршрута: добавление/удаление мест, изменение описания.
  - Удаление маршрута.

---

##### **4. Рецензии к маршрутам (RouteReviews)**

- **Модель рецензии включает:**
  
  - ID
  - Автор (author, связь с `User`)
  - Текст рецензии (text)
  - Рейтинг (score)
  - Дата публикации (created_at)
- **Функционал:**
  
  - Оставить рецензию к маршруту.
  - Просмотреть список рецензий для маршрута.
  - Удалить или обновить свою рецензию.

---

##### **5. Теги (Tags)**

- Используются для классификации маршрутов и мест.
- Функционал API:
  - Получить список всех тегов.
  - Фильтрация маршрутов и мест по тегам.

---

##### **6. Карта**

- Маршруты отображаются с указанием точек на карте (координаты из `Place`).

---

##### **7. Поиск**

- Полнотекстовый поиск по:
  - Названию и описанию маршрутов.
  - Названию и описанию мест.
  - Тегам.

---

#### **3. API-эндпоинты**

API построено на основе REST и включает такие группы:

- `/auth/` — аутентификация и регистрация.
- `/users/` — работа с пользователями.
- `/places/` — работа с местами.
- `/routes/` — работа с маршрутами.
- `/tags/` — работа с тегами.

---

### **II. Frontend**

#### **1. Общие требования**

- Использовать **React** или **Vue.js**.
- Все запросы к бэкенду через **REST API**.
- Карты — интеграция с **Google Maps API** или **OpenStreetMap**.

---

#### **2. Основные экраны**

##### **1. Главная страница**

- Список популярных маршрутов.
- Поиск и фильтры (по тегам, рейтингу).

##### **2. Страница маршрута**

- Полное описание маршрута.
- Список мест с картой.
- Рецензии пользователей.

##### **3. Личный кабинет пользователя**

- Профиль пользователя.
- Список созданных маршрутов.
- Сохраненные маршруты.

##### **4. Карта маршрутов**

- Отображение маршрута на карте с точками посещения.

##### **5. Страница места**

- Описание места.
- Карта с указанием местоположения.
- Список маршрутов, включающих это место.

---

### **III. Функциональные требования**

#### **1. Респонсивность**

- UI должен адаптироваться под разные размеры экранов (desktop, tablet, mobile).

#### **2. Производительность**

- Минимизировать количество запросов к серверу.
- Использовать кэширование для часто запрашиваемых данных.

#### **3. Удобство использования**

- Простой и интуитивно понятный интерфейс.
- Возможность поделиться маршрутом (генерация ссылки).

---

### **IV. Нефункциональные требования**

- **Логирование**: Все запросы к API и основные действия пользователей.
- **Документация**: Подробная документация для API (Swagger).
- **Тестирование**: Покрытие основных модулей авто- и юнит-тестами.